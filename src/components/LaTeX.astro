---
import "katex/dist/katex.css"
import rehypeParse from "rehype-parse"
import rehypeStringify from "rehype-stringify"
import { unified } from "unified"
import { rehypeKatex } from '~/lib/rehypeKatex'

const slot = await Astro.slots.render("default")
const math = await unified()
  .use(rehypeParse)
  .use(rehypeKatex)
  .use(rehypeStringify)
  .process(slot)
const html = String(math)
---

<Fragment set:html={html} />
